<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Web Dev & Code Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
*{font-family:Arial;margin:0;padding:0;box-sizing:border-box}
body{background:#f5f5f5;color:#111;transition:.3s}
.dark{background:#0d1117;color:#eee}
header{padding:10px;display:flex;justify-content:space-between;background:#007bff;color:white}
button{padding:6px 12px;border:none;border-radius:5px;cursor:pointer}
#tabs button{margin-right:10px;background:#ddd}
.dark #tabs button{background:#222;color:#ddd}
#container{padding:10px}
.panel{display:none}
.active{display:block}
#editor{height:250px;border:1px solid #999}
#console-output{height:180px;background:#000;color:#0f0;padding:6px;overflow-y:auto;font-family:monospace}
input,textarea,select{padding:8px;width:100%;margin:5px 0;border-radius:5px;border:1px solid #777}
table{width:100%;border-collapse:collapse;margin:10px 0}
td,th{border:1px solid #888;padding:8px;text-align:center}
</style>
</head>
<body>

<header>
<div><b>Web Dev & Code Runner</b></div>
<button onclick="toggleTheme()">üåô/‚òÄÔ∏è</button>
</header>

<div id="tabs">
<button onclick="showPanel('code')">üíª Code Editor</button>
<button onclick="showPanel('console')">üß™ Console</button>
<button onclick="showPanel('file')">üìÅ File Manager</button>
<button onclick="showPanel('calc')">üßÆ Calculator</button>
<button onclick="showPanel('web')">üåê Web Preview</button>
</div>

<div id="container">

<!-- CODE EDITOR -->
<div id="code" class="panel active">
<select id="language">
<option value="cpp">C++</option>
<option value="python">Python</option>
<option value="javascript">JavaScript</option>
<option value="html">HTML Preview</option>
</select>
<div id="editor">// Write your code here...</div>
<label>Input (optional):</label>
<textarea id="stdin" placeholder="cin input..."></textarea>
<button onclick="runCode()">‚ñ∂ Run</button>
</div>

<!-- CONSOLE -->
<div id="console" class="panel">
<h3>Output</h3>
<div id="console-output"></div>
</div>

<!-- FILE MANAGER -->
<div id="file" class="panel">
<input id="filename" placeholder="filename.cpp">
<textarea id="filecontent" placeholder="file content..."></textarea>
<button onclick="saveFile()">üíæ Save</button>
<button onclick="loadFiles()">üì• Refresh</button>
<table id="filelist"><tr><th>Name</th><th>Open</th><th>Delete</th></tr></table>
</div>

<!-- CALCULATOR -->
<div id="calc" class="panel">
<input id="calc-display" disabled>
<div>
<button onclick="addCalc('7')">7</button><button onclick="addCalc('8')">8</button><button onclick="addCalc('9')">9</button>
<button onclick="addCalc('/')">/</button>
</div><div>
<button onclick="addCalc('4')">4</button><button onclick="addCalc('5')">5</button><button onclick="addCalc('6')">6</button>
<button onclick="addCalc('*')">*</button>
</div><div>
<button onclick="addCalc('1')">1</button><button onclick="addCalc('2')">2</button><button onclick="addCalc('3')">3</button>
<button onclick="addCalc('-')">-</button>
</div><div>
<button onclick="addCalc('0')">0</button><button onclick="addCalc('.')">.</button>
<button onclick="calcEqual()">=</button><button onclick="addCalc('+')">+</button>
</div>
<button onclick="clr()">C</button>
</div>

<!-- WEBVIEW -->
<div id="web" class="panel">
<iframe id="webview" style="width:100%;height:300px;border:1px solid #444;"></iframe>
</div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.0/ace.js"></script>
<script>
// ------- UI ------- //
function showPanel(id){
document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
document.getElementById(id).classList.add('active');
}
function toggleTheme(){ document.body.classList.toggle("dark"); }

// ------- EDITOR ------- //
var editor=ace.edit("editor");
editor.setTheme("ace/theme/dracula");
editor.session.setMode("ace/mode/c_cpp");

// ------- JSONBIN CONFIG (YOUR REAL VALUES) ------- //
const API_KEY="$2a$10$VgGdKhHNGyYIibY1.OQxl.B6kODOFjQwK7asUOTKl67UrFanxbtKe";
const BIN="6937c4e0d0ea881f401c5109";

// File Manager JSONBIN
async function loadFiles(){
const res=await fetch(`https://api.jsonbin.io/v3/b/${BIN}/latest`,{
headers:{ "X-Master-Key":API_KEY }
});
const data=await res.json();
let files=data.record.files || [];
let html="<tr><th>Name</th><th>Open</th><th>Delete</th></tr>";
files.forEach((f,i)=>{
html+=`<tr><td>${f.name}</td>
<td><button onclick="openFile(${i})">Open</button></td>
<td><button onclick="delFile(${i})">X</button></td></tr>`;
});
filelist.innerHTML=html;
}
async function saveFile(){
let content=editor.getValue();
let name=document.getElementById("filename").value;
if(!name)return alert("Filename?");
let res=await fetch(`https://api.jsonbin.io/v3/b/${BIN}/latest`,{
headers:{ "X-Master-Key":API_KEY }
});
let data=await res.json();
let arr=data.record.files||[];
arr.push({name,content});
await fetch(`https://api.jsonbin.io/v3/b/${BIN}`,{
method:"PUT",
headers:{
"Content-Type":"application/json",
"X-Master-Key":API_KEY
},
body:JSON.stringify({files:arr})
});
alert("Saved!");
}
async function openFile(i){
const res=await fetch(`https://api.jsonbin.io/v3/b/${BIN}/latest`,{
headers:{ "X-Master-Key":API_KEY }
});
const data=await res.json();
editor.setValue(data.record.files[i].content);
}
async function delFile(i){
const res=await fetch(`https://api.jsonbin.io/v3/b/${BIN}/latest`,{
headers:{ "X-Master-Key":API_KEY }
});
const data=await res.json();
let arr=data.record.files;
arr.splice(i,1);
await fetch(`https://api.jsonbin.io/v3/b/${BIN}`,{
method:"PUT",
headers:{
"Content-Type":"application/json",
"X-Master-Key":API_KEY
},
body:JSON.stringify({files:arr})
});
loadFiles();
}



// ------- RUN CODE ------- //
async function runCode(){
const lang=document.getElementById("language").value;
const code=editor.getValue();
const input=document.getElementById("stdin").value;
if(lang=="html"){ webview.srcdoc=code; showPanel('web'); return; }

let body={
clientId:"your_id",clientSecret:"your_secret",
script:code,
stdin:input,
language:lang=="cpp"?"cpp17":lang,
versionIndex:"0"
};

let res=await fetch("https://api.jdoodle.com/v1/execute",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(body)
});
let result=await res.json();
console-output.innerHTML=(result.output||"")+"\n";
showPanel('console');
}

// Calculator
function addCalc(n){ calc-display.value+=n }
function clr(){ calc-display.value="" }
function calcEqual(){ calc-display.value=eval(calc-display.value) }
</script>

</body>
</html>
